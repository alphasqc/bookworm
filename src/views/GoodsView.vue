<template>
    <div id="goodmain">
        <div id="souch">
            <svg id="shoplogo" t="1656903806758" class="icon" viewBox="0 0 3089 1024" version="1.1"
                xmlns="http://www.w3.org/2000/svg" p-id="13896" width="128" height="128">
                <path
                    d="M299.799654 190.454682l454.367023 0 0 73.678046-36.840569 0c0 124.843315 1.023386 366.343578 0 488.117043 0 51.165286-39.910605 80.841216-102.334874 80.841216l-68.564393 0 0-75.724659c20.466995-1.023283 27.630387 0 45.027328 0 12.280218-1.023283 23.53705-14.326272 23.53705-24.559309l0-468.674239-315.191538 0L299.79968 190.45468zM1865.523917 190.454682l331.565125 0c23.53705 0 40.93399 21.489459 40.93399 39.908966l0 234.337119 45.027363 0c0 80.841216 0 143.262822 1.023386 224.104038 0 30.699213-28.653773 47.072051-47.074099 47.072051l-54.237505 0 0-60.375066c-101.31159 0-247.650509 2.046566-338.72855 2.046566 0-47.072051 45.027328-73.678029 74.704486-73.678029l264.024081 0 0-65.491597c-110.521754 0-240.487014 0-240.487014 0-30.700442 0-61.400986-28.652544-61.400986-63.444992l0-178.055279 75.727837 0c15.350272 0 25.583718 13.302989 25.583718 22.512742l0 132.0065c0 6.139802 8.186778 13.302989 14.326886 13.302989l123.825247 0 0-200.568015-254.813938 0L1865.523943 190.45468zM566.893773 308.134912l0 317.224922c0 49.11872-22.513664 85.957734-90.054758 85.957734 0 0-95.171482 0-173.969306 0l0-403.182642L566.893836 308.134926zM387.807642 386.929459l0 250.710019 66.517695 0c15.350272 0 22.513664-11.25632 22.513664-24.559309l0-226.15067L387.807735 386.929499zM0.981709 833.09097l0-624.216781c0 0 0-18.419507 21.490381-18.419507l242.533749 0 0 385.786437c0 64.468275-60.3776 135.076454-129.965363 135.076454l0-82.887802c0 0 36.84055-14.326272 36.84055-55.258522l0-309.038472-72.65779 0 0 568.958246L0.981756 833.091023zM2670.89961 190.454682l331.565125 0c22.513664 0 40.93399 21.489459 40.93399 39.908966l0 234.337119 45.027363 0 0 304.945247c0 28.652544-21.490381 63.444992-70.611046 63.444992l-32.747173 0-59.354251 0 0-73.678046 37.863919 0c14.326886 0 22.513664-5.116518 22.513664-16.372941l0-67.538209-335.658521 0c0-47.072051 47.074099-71.631462 74.704486-71.631462l260.954033 0 0-65.491597c-108.474982-2.046566-238.440346-2.046566-238.440346-2.046566-31.723827 0-61.400986-26.605978-61.400986-61.398323l0-178.055279 75.727837 0c15.350272 0 25.583718 11.25632 25.583718 22.512742l0 132.0065c0 6.139802 7.163494 13.302989 14.326886 13.302989l123.825247 0 0-200.568015-254.813938 0L2670.899618 190.45468zM2867.382784 759.412941l-140.198834 0c-61.400986-5.116518-113.591706-14.326272-154.525696-48.095437 35.817267-39.908966 55.260877-85.957734 59.354214-172.938752l0-284.479123c0-8.18647-10.233446-18.419507-19.44361-18.419507l-124.848596 0 0-45.025473-98.241518 0 0 45.025473-31.723824 0 0 72.65474 31.723824 0 0 230.243895c0 86.981018 28.653773 132.006502 64.47104 172.938752-42.980659 29.67593-86.984704 48.095437-146.338918 48.095437l-24.56038 0-300.86465 0c-91.078042 0-179.086131-16.372941-212.856627-56.281805 30.700442-41.955533 49.120768-77.771264 58.330931-166.79895l0-276.292674c-1.023386-12.279706-12.280218-23.536026-23.53705-24.559309l-125.871945 0 0-45.025473-94.148122 0 0 45.025473-33.770522 0 0 72.65474 33.770522 0 0 228.197282c8.186778 89.027686 36.84055 117.68023 69.587763 169.8688-50.144154 34.792448-108.474982 51.165286-179.086131 53.211955l-266.070779 0 0-56.281841 266.070779 0 0-77.771271-266.070779 0 0-56.281841 200.576433 0c0 0 65.494323 0 65.494323-70.608077l0-308.015166-630.383076 0c-11.256832 0-21.490381 11.25632-21.490381 18.419507l0 360.203782 265.04743 0 0 56.281841-265.04743 0c0 23.536026 0 52.18857 1.023386 77.771264l264.024081 0 0 56.281841-310.074792 0 0 73.678046c232.300237 0 519.86135 1.023283 743.97481 0 61.400986 0 137.128755-31.722496 192.389632-63.444992 68.564378 53.211955 144.29225 63.444992 268.117504 63.444992l126.895295 0 173.969355 0c105.404928 0 170.899354-22.512742 236.393677-61.398323 59.354214 35.815731 115.638477 58.328474 207.739904 61.398323l140.198834 0L2867.38286 759.412926zM1087.778509 496.423219l-163.735864 0 0-77.771271 163.735864 0L1087.778509 496.423233zM1087.778509 341.903974l-163.735864 0 0-77.771271 163.735864 0L1087.778509 341.903997zM1208.533709 264.13271l163.735864 0 0 77.771271-163.735864 0L1208.533709 264.132726zM1208.533709 418.651955l163.735864 0 0 77.771271-163.735864 0L1208.533709 418.651962zM1735.558656 538.378752c-3.070054 50.142003-12.280218 62.421709-24.560333 96.190771-14.326886-32.745779-27.630387-46.048768-32.747213-96.190771 2.046669-66.514944 0-159.635763 0-230.243942l57.307552 0L1735.558663 538.378787zM2541.957734 538.378752c-2.046669 46.048768-13.303501 68.56151-26.607104 96.190771-15.350272-26.605978-28.653773-52.18857-28.653773-96.190771l0-230.243895 55.260854 0L2541.957712 538.378787z"
                    p-id="13897" fill="#fd6660"></path>
            </svg>
            <div id="search">
                <input type="text" placeholder="请输入需要搜索的商品关键词">
                <a href="#">
                    <svg t="1656903155194" class="icon" viewBox="0 0 1024 1024" version="1.1"
                        xmlns="http://www.w3.org/2000/svg" p-id="9574" width="32" height="32">
                        <path
                            d="M955.733333 923.733333l-149.333333-153.6C876.8 693.333333 917.333333 593.066667 917.333333 490.666667c0-224-181.333333-405.333333-405.333333-405.333334S106.666667 266.666667 106.666667 490.666667s181.333333 405.333333 405.333333 405.333333c64 0 125.866667-14.933333 183.466667-42.666667 10.666667-4.266667 14.933333-17.066667 8.533333-27.733333-4.266667-10.666667-19.2-14.933333-27.733333-8.533333-51.2 25.6-106.666667 38.4-164.266667 38.4-200.533333 0-362.666667-162.133333-362.666667-362.666667S311.466667 128 512 128s362.666667 162.133333 362.666667 362.666667c0 100.266667-42.666667 196.266667-115.2 264.533333-8.533333 8.533333-8.533333 21.333333 0 29.866667 2.133333 2.133333 4.266667 4.266667 8.533333 4.266666l157.866667 162.133334c4.266667 4.266667 10.666667 6.4 14.933333 6.4 6.4 0 10.666667-2.133333 14.933333-6.4 6.4-6.4 8.533333-19.2 0-27.733334z"
                            p-id="9575" fill="#fd736d"></path>
                    </svg>
                </a>
            </div>
        </div>

        <div id="goodrow">
            <div id="shopreal">
                <div class="aside left">
                    <img :src="goodimg" alt="" style="height: 100%; width: 100%;">
                    <div id="outimg">
                        <img :src="item" alt="" v-for="(item,index) in goods.src" :key="index" @click="checkImg(index)">
                    </div>
                </div>
                <div class="aside main">
                    <div class="name">{{goods.name}}</div>
                    <div class="price">
                        <div class="title">价格</div>
                        <div style="font-family: '黑体'; color:red; font-size: 30px;">{{goods.price}}</div>
                    </div>
                    <div class="size">
                        <div class="title">规格</div>
                        <div class="dosize" @click="chooseSize(siz)" v-for="(siz,index) in goods.size" :key="index" tabindex="1">
                            {{siz}}
                        </div>
                    </div>
                    <div class="map">
                        <div class="title">地区</div>
                        <select>
                            <option disabled selected hidden>请选择</option>
                            <option>北京市</option>
                            <option>重庆市</option>
                            <option>上海市</option>
                            <option>天津市</option>
                            <option>河北省</option>
                            <option>山西省</option>
                            <option>辽宁省</option>
                            <option>吉林省</option>
                            <option>黑龙江省</option>
                            <option>江苏省</option>
                            <option>黑龙江省</option>
                            <option>江苏省</option>
                            <option>浙江省</option>
                            <option>安徽省</option>
                            <option>福建省</option>
                            <option>江西省</option>
                            <option>山东省</option>
                            <option>河南省</option>
                            <option>湖北省</option>
                            <option>湖南省</option>
                            <option>广东省</option>
                            <option>海南省</option>
                            <option>四川省</option>
                            <option>贵州省</option>
                            <option>云南省</option>
                            <option>陕西省</option>
                            <option>甘肃省</option>
                            <option>青海省</option>
                            <option>台湾省</option>
                        </select>
                    </div>
                    <div class="num">
                        <div class="title">数量</div>
                        <div style="border: 1px black solid;">
                            <button @click="edd">-</button>
                            <input type="number" v-model="num" oninput="if(value<1)value=1;if(value>100)value=100">
                            <button @click="add">+</button>
                        </div>
                    </div>
                    <div class="but">
                        <button id="buy" style="margin-right:50px; background-color: rgb(255, 182, 182);" @click="addOrder">
                            立即购买
                        </button>
                        <button id="addcar" style="color: white; background-color: red;width: 150px;"
                            @click="addCar()">
                            <svg t="1657184488159" class="icon" viewBox="0 0 1024 1024" version="1.1"
                                xmlns="http://www.w3.org/2000/svg" p-id="2293" width="16" height="16">
                                <path
                                    d="M346.112 806.912q19.456 0 36.864 7.168t30.208 19.968 20.48 30.208 7.68 36.864-7.68 36.864-20.48 30.208-30.208 20.48-36.864 7.68q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-36.864 7.68-36.864 20.48-30.208 30.208-19.968 37.888-7.168zM772.096 808.96q19.456 0 37.376 7.168t30.72 19.968 20.48 30.208 7.68 36.864-7.68 36.864-20.48 30.208-30.72 20.48-37.376 7.68-36.864-7.68-30.208-20.48-20.48-30.208-7.68-36.864 7.68-36.864 20.48-30.208 30.208-19.968 36.864-7.168zM944.128 227.328q28.672 0 44.544 7.68t22.528 18.944 6.144 24.064-3.584 22.016-13.312 37.888-22.016 62.976-23.552 68.096-18.944 53.248q-13.312 40.96-33.28 56.832t-49.664 15.872l-35.84 0-65.536 0-86.016 0-96.256 0-253.952 0 14.336 92.16 517.12 0q49.152 0 49.152 41.984 0 20.48-9.728 35.328t-38.4 14.848l-49.152 0-94.208 0-118.784 0-119.808 0-99.328 0-55.296 0q-20.48 0-34.304-9.216t-23.04-24.064-14.848-32.256-8.704-32.768q-1.024-6.144-5.632-29.696t-11.264-58.88-14.848-78.848-16.384-87.552q-19.456-103.424-44.032-230.4l-76.8 0q-15.36 0-25.6-7.68t-16.896-18.432-9.216-23.04-2.56-22.528q0-20.48 13.824-33.792t37.376-13.312l21.504 0 21.504 0 25.6 0 34.816 0q20.48 0 32.768 6.144t19.456 15.36 10.24 19.456 5.12 17.408q2.048 8.192 4.096 23.04t4.096 30.208q3.072 18.432 6.144 38.912l700.416 0zM867.328 194.56l-374.784 0 135.168-135.168q23.552-23.552 51.712-24.064t51.712 23.04z"
                                    p-id="2294" fill="#ffffff"></path>
                            </svg>
                            加入购物车
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<style>
.sizechange{
    border: 3px red solid;
}

.dosize:hover{
    border: red 3px solid;
}

.dosize:focus{
    border: red 3px solid;
    background-color: white;
    color: red
}

.dosize{
    height: 20px;
    width: 50px;
    border: 1px solid black;
    padding: 5px;
    margin-right: 10px;
    text-align: center;
    background-color: rgb(237, 237, 237);
}

#outimg{
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100px;
}
#outimg>img{
    border: 3px solid rgb(193, 193, 193);
    width: 60px;
    height: 60px;
}
.title{
    font-family: "华文宋体";
    font-size: 13px;
    width: 50px;
}
.price,.num,.map,.size{
    display: flex;
    flex-wrap: nowrap;
    align-items: center;
}
.size{
    height: 80px;
}
.map{
    height: 40px;
}
.num input{
    width: 50px;
    height: 30px;
    text-align: center;
    border: 0;
}
.num button{
    width: 30px;
    height: 30px;
    border: 0;
}
.name{
    font-size: 25px
}
.but{
    display: flex;
    flex-wrap: nowrap;
    margin: 0 auto;
}
.but>button{
    font-family: '黑体';
    border-radius: 3px;
    border: 1px solid rgb(255, 95, 95);
    width: 100px;
    height: 40px;
}
.aside.left{
    height: 400px;
    width: 400px;
    box-shadow: 2px 2px 7px gray;
}
.aside.main{
    height: 470px;
    width: 550px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
#goodrow{
    padding: 20px;
}
#shopreal{
    display: flex;
    justify-content: space-around;
}
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
}

input[type="number"] {
    -moz-appearance: textfield;
}
</style>

<style>

#outimg>img:hover{
    border: 2px rgb(255, 130, 130) solid;
    box-shadow: 0px 0px 3px rgb(255, 130, 130);
}
#goodmain {
    background-color: white;
    height: 720px;
}
#shoplogo {
    position: absolute;
    margin-left: 11rem;
}

#goodrow{
    border: 1px solid rgb(221, 221, 221);
    margin: 0 auto;
    width: 1100px;
    height: 500px;
}

#souch{
    margin: 0;
    height: 100px;
    padding-top: 50px;
}

#search input {
    width: 270px;
    height: 35px;
    border: 0;
    font-size: 14px;
    outline: none;
    font-size: 16px;
}

#search {
    width: 320px;
    height: 35px;
    border: 3px solid rgb(255, 121, 121);
    border-radius: 30px;
    display: flex;
    margin: 0 auto;
}

#search a {
    margin-right: 10px;
}
</style>

<script>
import { getData } from '@/api/index.js'
import axios from 'axios'

export default {
  data () {
    return {
      goods: [],
      goodid: '',
      num: 1,
      goodimg: '',
      choosesize: '',
      car: {}
    }
  },
  methods: {
    add () {
      if (this.num < 100) {
        this.num++
      }
    },
    edd () {
      if (this.num > 1) {
        this.num--
      }
    },
    chooseSize (siz) {
      this.choosesize = siz
    },
    goodSubmit () {
      this.$router.push('/order')
    },
    checkImg(index) {
      this.goodimg = this.goods.src[index]
    },
    addCar () {
    //   console.log(this.num)
      axios.request({
        method: 'post',
        url: 'http://localhost:3000/car/',
        headers: {
          'Content-type': 'application/json'
        },
        data: {
          name: this.goods.name,
          src: this.goods.src[0],
          num: this.num,
          size: this.choosesize,
          price: this.goods.price,
          checked: false
        }
      }).then(() => {
        this.$router.push('/cart')
      })
    },
    addOrder () {
      axios.request({
        method: 'post',
        url: 'http://localhost:3000/order/',
        header: {
          'Content-type': 'application/json'
        },
        data: {
          name: this.goods.name,
          src: this.goods.src[0],
          num: this.num,
          size: this.choosesize,
          price: this.goods.price,
          type: '运输中'
        }
      }).then(() => {
        this.$router.push('/order')
      })
    }
  },
  created () {
    this.goodid = this.$route.params.goodid
    console.log(this.goodid)
    getData('goods').then((res) => {
      this.goods = res.data[this.goodid]
      //   console.log(this.goods)
      this.goodimg = res.data[this.goodid].src[0]
    })
  }
}
</script>
